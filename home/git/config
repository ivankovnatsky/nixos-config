[user]
	name = Ivan Kovnatsky
	email = 75213+ivankovnatsky@users.noreply.github.com
	signingKey = 75213+ivankovnatsky@users.noreply.github.com

[commit]
	gpgSign = true

[tag]
	gpgSign = true
	forceSignAnnotated = true

[core]
	filemode = true
	commentChar = ";"

[init]
	defaultBranch = main

[diff]
	noprefix = true

[pull]
	rebase = false

[push]
	default = current

[http]
	version = HTTP/1.1
	postBuffer = 157286400

[delta "interactive"]
	keep-plus-minus-markers = true

[alias]
	a = add
	# Add all files in git root
	add-all = "!git add \"$(git rev-parse --show-toplevel)\""
	co = checkout
	c = commit -v
	ca = commit -av
	# Show unstaged changes (working tree vs index)
	d = diff --unified=10
	# Show staged changes (index vs HEAD)
	diff-staged = diff --staged --unified=10
	# Show all changes (both staged and unstaged, working tree vs HEAD)
	diff-all = diff --unified=10 HEAD
	l = log --oneline -n 20
	p = push
	pp = pull
	s = status
	# Review what would be committed without committing
	review = "!git status --verbose && git diff --staged"
	# Search commit messages (titles and body)
	grep-commits = log --all --grep
	# Search in diffs (code changes)
	grep-diff = log --all -S
	# Search everything (commits, diffs, files)
	grep-all = "!f() { git log --all --grep=\"$1\"; git log --all -S \"$1\"; git grep \"$1\"; }; f"
	# Show the last commit
	last = show HEAD
	# View all changes (alias for diff-all)
	view = diff --unified=10 HEAD
	# View all changes with bat pager
	view-pager = "!git diff --unified=10 HEAD | bat"
	# Get single staged file - fails if not exactly 1 file staged
	single-file = "!f() { files=$(git diff --staged --name-only); if [ -z \"$files\" ]; then echo 'No staged files' >&2; return 1; fi; count=$(echo \"$files\" | wc -l | tr -d ' '); if [ \"$count\" -ne 1 ]; then echo \"Expected 1 staged file, found $count:\" >&2; echo \"$files\" >&2; return 1; fi; echo \"$files\"; }; f"
	# Get commit message prefix from single staged file (strips .nix extension)
	commit-prefix = "!f() { file=$(git single-file) || return 1; echo \"$file\" | sed 's/\\.nix$//'; }; f"
	# Commit single staged file with auto-generated prefix: git add <file> && git message "subject"
	message = "!f() { prefix=$(git commit-prefix) || return 1; git commit -m \"$prefix: $1\"; }; f"
