#!/usr/bin/env bash

set -euo pipefail

# When git commit <file> is used, GIT_INDEX_FILE points to a temp index
# When git commit (no file) is used, GIT_INDEX_FILE is empty or .git/index
if [[ -z "${GIT_INDEX_FILE:-}" || "$GIT_INDEX_FILE" == *".git/index" ]]; then
  echo "ERROR: Must specify file(s) to commit" >&2
  echo "Use: git commit <file> -m \"message\"" >&2
  exit 1
fi
